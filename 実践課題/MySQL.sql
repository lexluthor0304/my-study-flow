/*
データベース生成
*/

CREATE DATABASE test;

USE test;

CREATE TABLE tempTbl(
    TO_USERID VARCHAR(10),
    TO_PASSWORD VARCHAR(20),
    TO_TEL VARCHAR(10),
    TO_BIRTHDAY DATETIME,
    TO_ADDRESS VARCHAR(100),
    TO_TOROKUBI DATETIME
);

/*
データ型を変更
*/

ALTER TABLE tempTbl CHANGE TO_TEL TO_TELEPHONE VARCHAR(11);

/*
データ挿入
*/

INSERT INTO tempTbl(
    TO_USERID,
    TO_PASSWORD,
    TO_TELEPHONE,
    TO_BIRTHDAY,
    TO_ADDRESS,
    TO_TOROKUBI
) 
VALUE('user01', 'user01', '08012345678', '19881112', '横浜市神奈川区', '20150903');

INSERT INTO tempTbl VALUE('user02', 'user02', '08022345678', '19871011', '大阪市浪速区', '20150907');
INSERT INTO tempTbl VALUE('user03', 'user03', '08012345898', '19651001', '海老名市相模', '20150903');
INSERT INTO tempTbl VALUE('user04', 'user04', '08012347654', '19640220', '奈良市', '20150901');
INSERT INTO tempTbl VALUE('user05', 'user05', '08012345898', '19830221', '京都市', '20150903');
INSERT INTO tempTbl VALUE('user06', 'user06', '08012347776', '19990101', '神戸市', '20150901');
INSERT INTO tempTbl VALUE('user07',	'user07', '08012300099', '19790512', '前橋市', '20150903');
INSERT INTO tempTbl VALUE('user08',	'user08', '08012341239', '19800210', '那覇市', '20150901');

/*
データをTO_BIRDTHDAYでソートする
*/

SELECT 
TO_USERID, TO_BIRTHDAY, TO_ADDRESS, TO_TOROKUBI 
FROM temptbl WHERE TO_TOROKUBI='20150903' ORDER BY TO_BIRTHDAY;

/*
user01とuser02の登録日付を当日日付に更新する	2018/08/09		
*/

UPDATE tempTbl SET TO_TOROKUBI='20180809' WHERE TO_USERID='user01';
UPDATE tempTbl SET TO_TOROKUBI='20180809' WHERE TO_USERID='user02';

/*
登録日付が'20150903'の件数を合計する
*/

SELECT COUNT(TO_TOROKUBI) FROM temptbl GROUP BY TO_TOROKUBI HAVING TO_TOROKUBI = '20150903';

/*
登録日付が'20150903'の件数を全部削除する
*/

DELETE FROM temptbl WHERE TO_TOROKUBI='20150903';